---
title: 20171027-misc
date: 2017-10-27 09:54:16
tags:
---

### 注册用的密码
大量的网站要注册密码，使用相同的密码又不安全。一个垃圾站点泄露密码后，所有的账号都不安全了。   

一种思路是对不同的网站分类，不同类别使用不同的密码。 这样可以一定程度缓解问题。 还是存在一定风险。
当同类的泄露之后，相同级别的站点密码也需要及时修改。可以在这种思路基础之上，再加一个改变。
在同级别的站点的密码不使用相同的， 但使用相同生成规则和salt, 再加上站点的二级域名.
```
passwd=rule(domain, salt)
// 例如csdn.com, 二级域名=csdn，使用的salt=2017，rule=简单拼接，那么passwd=csdn2017
```

另一种思路是使用密码管理软件。这类软件还没使用过，不好评价。可能不是所有场景都能输入密码。
目前使用过的浏览器表单保存工具，使用体验也不是太好。

### jvm垃圾回收占用cpu超过
   有个job被反馈cpu超用，主要是gc线程在使用cpu。后来追加了参数"-XX:SurvivorRatio=5
-XX:ParallelGCThreads=4"后， 问题消除。   这里最主要的是ParallelGCThreads这个参数。
为了提高垃圾回收的性能，java在parallel回收的时候可以设置同时并行处理的线程数也就是ParallelGCThreads，
如果你没有设置该参数，当核数小于8时，该参数jvm会默认设置成online的cpu的核数但并不包括被shutdown的cpu的核数。
当核数大于8时，该参数按下述公式设置.
```
ParallelGCThreads＝8+( Processor - 8 ) ( 5/8 )
```
   问题出在没有设置这个参数，而程序又是跑在物理机(64核)上的。这样默认开启的线程数就太多了，
大量gc线程没事儿干，一直处于自旋锁状态，所以cpu才会超用。
   jvm参数的设置不能一招鲜吃遍天，有时还得考虑运行的具体环境。
